diff --git a/CMakeLists.txt b/CMakeLists.txt
index 7d57438e..3392f0c3 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -12,64 +12,6 @@ if(APPLE)
   endif()
 endif()
 
-if(DISABLE_VCPKG)
-else()
-  # Enable vcpkg
-  set(CMAKE_TOOLCHAIN_FILE
-    "${EXTERNAL_DIR}/vcpkg/scripts/buildsystems/vcpkg.cmake")
-  set(VCPKG_INSTALL_OPTIONS "--allow-unsupported")
-
-  # Set the triplet
-  if(WIN32)
-    set(VCPKG_TARGET_TRIPLET "x64-windows-static" CACHE STRING "VCPKG Triplet")
-    set(protobuf_MSVC_STATIC_RUNTIME ON)
-  elseif(APPLE)
-    execute_process(
-      COMMAND uname -m
-      COMMAND tr -d '\n'
-      OUTPUT_VARIABLE VCPKG_ARCHITECTURE)
-    message(STATUS "Architecture: ${VCPKG_ARCHITECTURE}")
-
-    if(${VCPKG_ARCHITECTURE} STREQUAL "arm64") # Apple Silicon
-      set(VCPKG_TARGET_TRIPLET "arm64-osx" CACHE STRING "VCPKG Triplet")
-    else()
-      set(VCPKG_TARGET_TRIPLET "x64-osx" CACHE STRING "VCPKG Triplet")
-    endif()
-  else()
-    execute_process(
-      COMMAND uname -m
-      COMMAND tr -d '\n'
-      OUTPUT_VARIABLE VCPKG_ARCHITECTURE)
-    message(STATUS "Architecture: ${VCPKG_ARCHITECTURE}")
-
-    if(${VCPKG_ARCHITECTURE} STREQUAL "x86_64")
-      set(VCPKG_TARGET_TRIPLET "x64-linux" CACHE STRING "VCPKG Triplet")
-    elseif(${VCPKG_ARCHITECTURE} STREQUAL "x86_86")
-      set(VCPKG_TARGET_TRIPLET "x86-linux" CACHE STRING "VCPKG Triplet")
-    elseif(${VCPKG_ARCHITECTURE} STREQUAL "aarch64")
-      set(VCPKG_TARGET_TRIPLET "arm64-linux" CACHE STRING "VCPKG Triplet")
-    elseif(${VCPKG_ARCHITECTURE} STREQUAL "arm64")
-      set(VCPKG_TARGET_TRIPLET "arm64-linux" CACHE STRING "VCPKG Triplet")
-    elseif(${VCPKG_ARCHITECTURE} MATCHES "arm.*")
-      set(VCPKG_TARGET_TRIPLET "arm-linux" CACHE STRING "VCPKG Triplet")
-    else()
-      set(VCPKG_TARGET_TRIPLET "${VCPKG_ARCHITECTURE}-linux" CACHE STRING "VCPKG Triplet")
-    endif()
-  endif()
-
-  # Make BoostConfig.cmake able to check its inputs
-  cmake_policy(SET CMP0057 NEW)
-
-  # Honor the visibility properties for all target types, including
-  # object libraries and static libraries.
-  cmake_policy(SET CMP0063 NEW)
-
-  # Don't ignore <PackageName>_ROOT variables
-  cmake_policy(SET CMP0074 NEW)
-
-  set(Protobuf_USE_STATIC_LIBS ON)
-endif()
-
 message(STATUS "VCPKG TRIPLET: ${VCPKG_TARGET_TRIPLET}")
 
 project(EternalTCP VERSION 6.2.11 LANGUAGES C CXX)
@@ -93,33 +35,23 @@ find_package(sodium REQUIRED)
 find_package(Protobuf REQUIRED)
 find_package(Unwind)
 
-if(DISABLE_VCPKG)
-  add_subdirectory(${EXTERNAL_DIR}/Catch2)
-  add_subdirectory(${EXTERNAL_DIR}/cxxopts)
-  add_subdirectory(${EXTERNAL_DIR}/cpp-httplib)
-  add_subdirectory(${EXTERNAL_DIR}/json)
-  include_directories(
-    SYSTEM ${EXTERNAL_DIR}/cpp-httplib
-  )
-  include_directories(
-    ${EXTERNAL_DIR}/simpleini
-    ${EXTERNAL_DIR}/json/include
-    ${EXTERNAL_DIR}/cxxopts/include
-  )
-else()
-  find_package(Catch2 CONFIG REQUIRED)
-  find_package(httplib CONFIG REQUIRED)
-  find_package(cxxopts CONFIG REQUIRED)
-  find_package(nlohmann_json CONFIG REQUIRED)
-  find_path(SIMPLEINI_INCLUDE_DIRS "ConvertUTF.c")
-endif()
+include_directories(${EXTERNAL_DIR}/simpleini)
+find_package(httplib REQUIRED)
+find_package(cxxopts REQUIRED)
+find_package(nlohmann_json REQUIRED)
 
 # Optional packages
-find_package(UTempter)
-
+option(WITH_UTEMPTER "Enable support for utempter" OFF)
+if (WITH_UTEMPTER)
+  find_package(UTempter REQUIRED)
+endif(WITH_UTEMPTER)
+ 
 if(LINUX)
-  find_package(SELinux)
-endif()
+  option(WITH_SELINUX "Enable support for selinux" OFF)
+  if (WITH_SELINUX)
+    find_package(SELinux REQUIRED)
+  endif(WITH_SELINUX)
+endif(LINUX)
 
 if(MSVC)
   set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")
@@ -149,28 +81,23 @@ ENDIF(APPLE)
 if(FREEBSD OR NETBSD OR DISABLE_SENTRY OR DISABLE_TELEMETRY)
 # Sentry doesn't work on BSD
 else()
-  # Enable sentry
-  set(USE_SENTRY TRUE)
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DUSE_SENTRY")
-endif()
-
-if(DISABLE_TELEMETRY)
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DNO_TELEMETRY")
-endif()
-
-if(USE_SENTRY)
-  if(DISABLE_VCPKG)
+  # Optionally enable sentry
+  option(WITH_SENTRY "Enable Sentry crash logging" ON)
+  if (WITH_SENTRY)
+    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DWITH_SENTRY")
     set(SENTRY_BUILD_RUNTIMESTATIC ON)
     set(BUILD_SHARED_LIBS OFF)
     add_subdirectory("${EXTERNAL_DIR}/sentry-native")
     include_directories(
       ${EXTERNAL_DIR}/sentry-native/include
     )
-  else()
-    find_package(sentry CONFIG REQUIRED)
   endif()
 endif()
 
+if(DISABLE_TELEMETRY)
+  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DNO_TELEMETRY")
+endif()
+
 option(CODE_COVERAGE "Enable code coverage" OFF)
 option(FUZZING "Enable builds for fuzz testing" OFF)
 option(BUILD_TESTING "Build tests" ON)
@@ -225,14 +152,14 @@ if(Protobuf_VERSION VERSION_GREATER_EQUAL 4)
   set(PROTOBUF_LIBS ${PROTOBUF_LIBS} absl::log_internal_check_op)
 endif()
 
-if(SELINUX_FOUND)
+if(WITH_SELINUX)
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DWITH_SELINUX")
 else()
   set(SELINUX_INCLUDE_DIR "")
   set(SELINUX_LIBRARIES "")
 endif()
 
-if(UTEMPTER_FOUND)
+if(WITH_UTEMPTER)
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -DWITH_UTEMPTER")
 else()
   set(UTEMPTER_INCLUDE_DIR "")
@@ -289,7 +216,7 @@ IF(Unwind_FOUND)
   list(INSERT CORE_LIBRARIES 0 unwind::unwind)
 ENDIF()
 
-IF(USE_SENTRY)
+IF(WITH_SENTRY)
   list(INSERT CORE_LIBRARIES 0 sentry::sentry)
 ENDIF()
 
diff --git a/src/terminal/TelemetryService.cpp b/src/terminal/TelemetryService.cpp
index bb616be6..6166e730 100644
--- a/src/terminal/TelemetryService.cpp
+++ b/src/terminal/TelemetryService.cpp
@@ -3,12 +3,12 @@
 #include "JsonLib.hpp"
 #include "SimpleIni.h"
 
-#if defined(USE_SENTRY)
+#ifdef WITH_SENTRY
 #include "sentry.h"
 #endif
 
 namespace et {
-#ifdef USE_SENTRY
+#ifdef WITH_SENTRY
 inline sentry_level_e logLevelToSentry(el::Level l) {
   switch (l) {
     case el::Level::Info:
@@ -135,7 +135,7 @@ TelemetryService::TelemetryService(const bool _allow,
           << endl;
     }
 
-#ifdef USE_SENTRY
+#ifdef WITH_SENTRY
     cerr << "Setting up and starting sentry" << endl;
     sentry_options_t* options = sentry_options_new();
     logHttpClient->set_compress(true);
@@ -263,7 +263,7 @@ TelemetryService::~TelemetryService() {
 
 void TelemetryService::logToSentry(el::Level level, const string& message) {
   if (!allowed) return;
-#ifdef USE_SENTRY
+#ifdef WITH_SENTRY
   sentry_capture_event(sentry_value_new_message_event(
       logLevelToSentry(level), "stderr", message.c_str()));
 #endif
@@ -293,7 +293,7 @@ void TelemetryService::shutdown() {
     }
     shuttingDown = true;
   }
-#ifdef USE_SENTRY
+#ifdef WITH_SENTRY
   sentry_shutdown();
 #endif
   if (logSendingThread) {
